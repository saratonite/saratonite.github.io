(function(f){function u(){var b=document.createElement("p"),d,a={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(b,null);for(var e in a)b.style[e]!==void 0&&(b.style[e]="translate3d(1px,1px,1px)",d=window.getComputedStyle(b).getPropertyValue(a[e]));document.body.removeChild(b);return d!==void 0&&d.length>0&&d!=="none"}function m(){return r===!0?!1:window.DeviceOrientationEvent!==
void 0}function s(b){if(!((new Date).getTime()<t+v)){t=(new Date).getTime();var d=h.offset()!=null?h.offset().left:0,a=h.offset()!=null?h.offset().top:0,d=b.pageX-d,a=b.pageY-a,e;a:{var c=i[0].obj[0].parentNode;if(!(c.offsetWidth===0||c.offsetHeight===0)){e=document.documentElement.clientHeight;for(var c=c.getClientRects(),g=0,f=c.length;g<f;g++){var j=c[g];if(j.top>0?j.top<=e:j.bottom>0&&j.bottom<=e){e=!0;break a}}}e=!1}if(e){if(m()){if(b.gamma===void 0){r=!0;return}x=b.gamma;y=b.beta;Math.abs(window.orientation)===
90&&(y=x=y);window.orientation<0&&(x=-x,y=-y);n=n===null?x:n;o=o===null?y:o;values={x:x-n,y:y-o};d=values.x/q;a=values.y/q;d=d<p?p:d>k?k:d;a=a<p?p:a>k?k:a;d=(d+1)/2;a=(a+1)/2}b=d/(m()===!0?k:h.width());d=a/(m()===!0?k:h.height());for(e=i.length;e--;)a=i[e],l.useTransform&&!a.background?(newX=a.transformStartX+a.inversionFactor*a.xRange*b,newY=a.transformStartY+a.inversionFactor*a.yRange*d,newZ=a.transformStartZ,a.obj.css({transform:"translate3d("+newX+"px,"+newY+"px,"+newZ+"px)"})):(newX=a.startX+
a.inversionFactor*a.xRange*b,newY=a.startY+a.inversionFactor*a.yRange*d,a.background?a.obj.css("background-position",newX+"px "+newY+"px"):a.obj.css("left",newX).css("top",newY))}}}var v=40,t=(new Date).getTime(),i=[],h=f(window),q=30,k=1,p=-1,n=null,o=null,r=!1,l=null,w={useTransform:!0};f.fn.plaxify=function(b){l=f.extend({},w,b);l.useTransform=l.useTransform?u():!1;return this.each(function(){for(var d=-1,a={xRange:f(this).data("xrange")||0,yRange:f(this).data("yrange")||0,zRange:f(this).data("zrange")||
0,invert:f(this).data("invert")||!1,background:f(this).data("background")||!1},e=0;e<i.length;e++)this===i[e].obj.get(0)&&(d=e);for(var c in b)a[c]==0&&(a[c]=b[c]);a.inversionFactor=a.invert?-1:1;a.obj=f(this);if(a.background){pos=(a.obj.css("background-position")||"0px 0px").split(/ /);if(pos.length!=2)return;x=pos[0].match(/^((-?\d+)\s*px|0+\s*%|left)$/);y=pos[1].match(/^((-?\d+)\s*px|0+\s*%|top)$/);if(!x||!y)return;a.originX=a.startX=x[2]||0;a.originY=a.startY=y[2]||0;a.transformOriginX=a.transformStartX=
0;a.transformOriginY=a.transformStartY=0;a.transformOriginZ=a.transformStartZ=0}else{var e=a.obj.position(),g=a.obj;c=[0,0,0];g=g.css("-webkit-transform")||g.css("-moz-transform")||g.css("-ms-transform")||g.css("-o-transform")||g.css("transform");if(g!=="none"){c=g.split("(")[1].split(")")[0].split(",");var h=g=0,j=0;c.length==16?(g=parseFloat(c[c.length-4]),h=parseFloat(c[c.length-3]),j=parseFloat(c[c.length-2])):(g=parseFloat(c[c.length-2]),h=parseFloat(c[c.length-1]),j=0);c=[g,h,j]}a.obj.css({transform:c.join()+
"px",top:e.top,left:e.left,right:"",bottom:""});a.originX=a.startX=e.left;a.originY=a.startY=e.top;a.transformOriginX=a.transformStartX=c[0];a.transformOriginY=a.transformStartY=c[1];a.transformOriginZ=a.transformStartZ=c[2]}a.startX-=a.inversionFactor*Math.floor(a.xRange/2);a.startY-=a.inversionFactor*Math.floor(a.yRange/2);a.transformStartX-=a.inversionFactor*Math.floor(a.xRange/2);a.transformStartY-=a.inversionFactor*Math.floor(a.yRange/2);a.transformStartZ-=a.inversionFactor*Math.floor(a.zRange/
2);d>=0?i.splice(d,1,a):i.push(a)})};f.plax={enable:function(b){if(b&&(b.activityTarget&&(h=b.activityTarget||f(window)),typeof b.gyroRange==="number"&&b.gyroRange>0))q=b.gyroRange;h.bind("mousemove.plax",function(b){s(b)});if(m())window.ondeviceorientation=function(b){s(b)}},disable:function(b){f(document).unbind("mousemove.plax");window.ondeviceorientation=void 0;if(b&&typeof b.restorePositions==="boolean"&&b.restorePositions)for(var d=i.length;d--;)layer=i[d],l.useTransform&&!layer.background?
layer.obj.css("transform","translate3d("+layer.transformOriginX+"px,"+layer.transformOriginY+"px,"+layer.transformOriginZ+"px)").css("top",layer.originY):i[d].background?layer.obj.css("background-position",layer.originX+"px "+layer.originY+"px"):layer.obj.css("left",layer.originX).css("top",layer.originY);b&&typeof b.clearLayers==="boolean"&&b.clearLayers&&(i=[])}};typeof ender!=="undefined"&&f.ender(f.fn,!0)})(function(){return typeof jQuery!=="undefined"?jQuery:ender}());
