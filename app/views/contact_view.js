define(["backbone","text!templates/contact_tpl.html","nprogress","clickify"],function(b,c,a){return b.View.extend({template:_.template(c),initialize:function(){this.model.on("change",this.render,this)},events:{"click button":"send",submit:"send"},render:function(){$(this.$el).html(this.template(this.model.toJSON()));$(document).clickify();return this},send:function(){name=$("#name").val();email=$("#email").val();phone=$("#phone").val();note=$("#note").val();data={name:name,email:email,phone:phone,
note:note};this.model.save(data,{success:function(){},error:function(){alert("Error communication")},beforeSend:function(){$("#submit").attr("disabled","disabled").text("Sending..");a.start()},complete:function(){a.done();$("#submit").removeAttr("disabled").text("Send")}})}})});
